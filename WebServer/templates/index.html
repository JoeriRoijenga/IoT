<!doctype html>
<html>

<head>
    <title>ESP Data Sensor</title>
    <link rel="stylesheet" href='../static/styles.css'/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</head>

<body>
	<h1>ESP Sensor Data </h1>
    <div id="g1" class="reading"></div>
    <div id="g2" class="reading"></div>
    <div id="g3" class="reading"></div>
    <hr>
	<h3> Last Sensors Reading: {{ time }} ==> <a href="/" class="button">REFRESH</a></h3>	
	<hr>
	<h3> HISTORICAL DATA </h3>
	<p> Enter number of samples to retrieve:
	<form method="POST">
		<input name="numSamples" value= {{numSamples}}>
		<input type="submit">
	</form></p>
	<hr>

	<div class="graph">
		<img class="img-class" src="/plot/temp" alt="Image Placeholder" width="49%">
	</div>
	<div class="graph">
		<img class="img-class" src="/plot/hum" alt="Image Placeholder" width="49%">  
	</div>
</body>

</html>

<script src="../static/raphael-2.1.4.min.js"></script>
<script src="../static/justgage.js"></script>
<script>
	var g1, g2, g3;
	document.addEventListener("DOMContentLoaded", function(event) {
		g1 = new JustGage({
			id: "g1",
			value: {{temp}},
			valueFontColor: "black",
			titleFontColor: "black",
			min: -10,
			max: 50,
			title: "Temperature",
			label: "Celcius"
		});

		g2 = new JustGage({
			id: "g2",
			value: {{hum}},
			valueFontColor: "black",
			titleFontColor: "black",
			min: 0,
			max: 100,
			title: "Humidity",
			label: "%"
		});

		g3 = new JustGage({
			id: "g3",
			value: {{press}},
			valueFontColor: "black",
			titleFontColor: "black",
			min: 1000,
			max: 1050,
			title: "Pressure",
			label: "hPa"
		});

	});

	setTimeout(function(){
		window.location.reload(1);
	}, 30000);
</script>